{"blocks":[{"id":"BDC93E4E-1AB0-4806-B062-A788B8067006","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"Just press Start","childId":"A03BCEF8-6BD6-4E54-B279-7925CA1FF88E","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":12},{"id":"A03BCEF8-6BD6-4E54-B279-7925CA1FF88E","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"Welcome!","childId":"EE1D7579-44B0-4B17-9823-CE1BC1B2D58E","inputs":[{"id":"input","value":"Welcome to the installer. This guide will help you through the installation of our products","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":132},{"id":"16E9C779-2E70-490C-810A-5215915CEE19","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Cloud Services - List Spaces","comment":"","childId":"A1293535-DE63-447C-B164-033226636B06","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":709,"y":84,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"42815920-5f18-11eb-8321-91b1587b6c06","endpoint_role":"list"},{"id":"3616D65D-1152-40D9-BB3C-13A53336D298","type":"FormBlock","disabled":false,"name":"inputs2","displayName":"Inputs 2","comment":"","childId":"E355B264-D3DC-431C-8FF9-3979561DB641","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1084,"y":70,"form":[{"id":"inputs2-input-0","type":"select","label":"In which space should the app be installed?","order":0,"values":"{ $.filterList[*].name }","options":[],"helpText":"The app","isRequired":true}],"persistData":"no"},{"id":"2503E065-AD8D-4F51-BE52-1BF13700161C","type":"GotoBlock","disabled":false,"name":"goToLabel","displayName":"Go To Label","comment":"","childId":null,"inputs":[{"id":"label","value":"EBB6BEBF-7BFD-470F-B607-96ADDF6D4699","type":"select","displayValue":"ReportInput","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":852},{"id":"A1293535-DE63-447C-B164-033226636B06","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter over Qlik Cloud Services - List Spaces - Filter List","comment":"Only Shared","childId":"19A05CE5-91E3-4A13-9A49-8DB3358F83CC","inputs":[{"id":"list","value":"{ $.listSpaces }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"shared","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":709,"y":204,"loopBlockId":null},{"id":"E355B264-D3DC-431C-8FF9-3979561DB641","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList","displayName":"Lookup Item In List","comment":"","childId":"4DB3721B-FADD-411C-ADAA-E05600D115E7","inputs":[{"id":"list","value":"{ $.filterList }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"name","input2":"{ $.inputs2.'In which space should the app be installed?' }","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[],"x":1084,"y":190},{"id":"51B1926E-C6AB-4FB4-BA82-5716BA6B4E5E","type":"LabelBlock","disabled":false,"name":"label3","displayName":"Label - SpaceSettings","comment":"","childId":"16E9C779-2E70-490C-810A-5215915CEE19","inputs":[{"id":"name","value":"SpaceSettings","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":709,"y":-36},{"id":"19A05CE5-91E3-4A13-9A49-8DB3358F83CC","type":"FilterListBlock","disabled":false,"name":"filterList2","displayName":"Filter over Qlik Cloud Services - List Spaces - Filter List 2","comment":"Only Managed","childId":"A50FEC97-2D69-4865-8CF9-E25BA46D2B2D","inputs":[{"id":"list","value":"{ $.listSpaces }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"managed","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":709,"y":324,"loopBlockId":null},{"id":"9DE7CF15-1917-4EAB-85E6-546454E120BA","type":"EndpointBlock","disabled":false,"name":"getCurrentUserId","displayName":"Qlik Cloud Services - Get Current User Id","comment":"Get the current user ID to look up whether they have the TenantAdmin role","childId":"14A99950-3427-46EF-87CC-CC778F52EF6E","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":135,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9","endpoint_role":"get"},{"id":"5D9FFC3D-D983-4AFB-BB1F-94B3077A51D7","type":"EndpointBlock","disabled":false,"name":"searchUsers","displayName":"Qlik Cloud Services - Search Users","comment":"Uses a filter on users to return the current user only if TenantAdmin is assigned","childId":"FB311B53-0710-4000-A540-9F33CA51C348","inputs":[{"id":"b134f4e0-f832-11ec-858b-9feea72c382e","value":null,"type":"string","structure":[]},{"id":"b14f3e50-f832-11ec-9221-d7f5e04021c1","value":null,"type":"select","structure":[]},{"id":"43b94790-f834-11ec-95c2-1b59e214d993","value":"id eq \"{ $.getCurrentUserId }\" AND ((assignedRoles.name eq \"TenantAdmin\") or (assignedGroupsAssignedRoles.name eq \"TenantAdmin\"))","type":"string","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-282,"y":335,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"b0d2e830-f832-11ec-b448-6ba082700f84","endpoint_role":"search"},{"id":"0FF0A90A-81E4-44D2-85E2-8B168E1598D8","type":"LabelBlock","disabled":false,"name":"label4","displayName":"Label - UserSettings","comment":"Get UserSettings","childId":"9DE7CF15-1917-4EAB-85E6-546454E120BA","inputs":[{"id":"name","value":"UserSettings","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":15},{"id":"9B0A89A5-2944-43D2-A2C1-A1318E22159E","type":"IfElseBlock","disabled":false,"name":"condition7","displayName":"Condition 7","comment":"Whether TenantAdmin is assigned.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ count: { $.searchUsers } }","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":true},{"name":"no","isCollapsed":false}],"x":-282,"y":575,"childTrueId":null,"childFalseId":"6C118747-4224-48BB-8E1D-412E04728980"},{"id":"6C118747-4224-48BB-8E1D-412E04728980","type":"ShowBlock","disabled":false,"name":"output10","displayName":"Output 10","comment":"Prequisites not met","childId":"F2AC104F-4059-4EC4-9C1D-6D842BEC27EF","inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| User has the **TenantAdmin** role assigned | ❌ |\n{linebreak}\n{linebreak}\nThe executing user does not have the **TenantAdmin** role assigned, which is one of the prerequisites for the applications. Please try running this installer again once this role has been assigned. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":655},{"id":"F2AC104F-4059-4EC4-9C1D-6D842BEC27EF","type":"StopBlock","disabled":false,"name":"stop2","displayName":"Stop 2","comment":"STOP AUTOMATION -- NO TENANT ADMIN","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":775},{"id":"A4E1266E-9D03-4F36-BFB7-4892A1D8279E","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest","displayName":"Qlik Cloud Services - Raw API Request","comment":"Get assignment of this user","childId":"6BAEF254-AAF6-481A-A4B4-F9F1367C28C7","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"licenses/assignments","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"GET","type":"select","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"filter","value":"subject eq \"{regexreplace: { $.searchUsers[0].subject }, '(\\\\)', '\\\\\\\\'}\""}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":1015,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"6BAEF254-AAF6-481A-A4B4-F9F1367C28C7","type":"SleepBlock","disabled":false,"name":"sleep","displayName":"Sleep","comment":"","childId":"CF930BD7-85CA-4E84-8273-B583AC02579C","inputs":[{"id":"time","value":"1","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":1135},{"id":"CF930BD7-85CA-4E84-8273-B583AC02579C","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList2","displayName":"Lookup Item In List 2","comment":"is Professional?","childId":"D86CF427-22AC-4AEF-8C5D-1239176EE55F","inputs":[{"id":"list","value":"{$.rawAPIRequest.data}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"professional","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[],"x":-402,"y":1255},{"id":"D86CF427-22AC-4AEF-8C5D-1239176EE55F","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList15","displayName":"Lookup Item In List 15","comment":"Is fullUser (capacity)?","childId":"95FEC95E-2023-4B23-B108-DC2DDB44E2F5","inputs":[{"id":"list","value":"{$.rawAPIRequest.data}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"fullUser","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":1375},{"id":"95FEC95E-2023-4B23-B108-DC2DDB44E2F5","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList16","displayName":"Lookup Item In List 16","comment":"Is basicUser (capacity)?","childId":"2D5A4DE0-6B16-4411-9B56-C68439522316","inputs":[{"id":"list","value":"{$.rawAPIRequest.data}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"basicUser","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":1495},{"id":"2D5A4DE0-6B16-4411-9B56-C68439522316","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList5","displayName":"Lookup Item In List 5","comment":"Is analyzer?","childId":"9CE3772E-9070-4E15-BE63-F5A242863890","inputs":[{"id":"list","value":"{$.rawAPIRequest.data}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"analyzer","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":1615},{"id":"9CE3772E-9070-4E15-BE63-F5A242863890","type":"IfElseBlock","disabled":false,"name":"condition22","displayName":"Condition 22","comment":"Does the executing user have a professional entitlement?","childId":"536A7052-43DE-4648-BE3B-7CD9537FCFCA","inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{ $.lookupItemInList2 }","input2":"professional","operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":true},{"name":"no","isCollapsed":false}],"x":-402,"y":1735,"childTrueId":null,"childFalseId":"2A2A08E3-50C8-429A-9C8E-F8439AD7DF72"},{"id":"2A2A08E3-50C8-429A-9C8E-F8439AD7DF72","type":"IfElseBlock","disabled":false,"name":"condition172","displayName":"Condition 172","comment":"Does the executing user not have either a fullUser or basicUser entitlement?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.lookupItemInList15 }","input2":null,"operator":"empty"},{"input1":"{ $.lookupItemInList16 }","input2":null,"operator":"empty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-282,"y":1815,"childTrueId":"EB7FA526-ECC9-45F4-9D02-2C986803DA0F","childFalseId":"AA1FF9DF-C627-4C2B-AEFA-6C66332E9A33"},{"id":"EB7FA526-ECC9-45F4-9D02-2C986803DA0F","type":"EndpointBlock","disabled":false,"name":"getLicenseOverview","displayName":"Qlik Cloud Services - Get License Overview","comment":"Make sure that there are Professional entitlements available.","childId":"B93E7C3C-A081-47EA-80F3-AC749A11FEFC","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":1895,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"0e6d4530-3291-11ed-a2e9-3bc221fc190c","endpoint_role":"get"},{"id":"B93E7C3C-A081-47EA-80F3-AC749A11FEFC","type":"SleepBlock","disabled":false,"name":"sleep9","displayName":"Sleep 9","comment":"","childId":"EFBFE979-1EFF-43AB-8609-CE9E12A1344E","inputs":[{"id":"time","value":"1","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":2015},{"id":"EFBFE979-1EFF-43AB-8609-CE9E12A1344E","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList8","displayName":"Lookup Item In List 8","comment":"Get Professional entitlements object","childId":"307BA38D-647B-48DB-91CF-93EDBBB59990","inputs":[{"id":"list","value":"{$.getLicenseOverview.allotments}","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"name","input2":"professional","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":2135},{"id":"307BA38D-647B-48DB-91CF-93EDBBB59990","type":"VariableBlock","disabled":false,"name":"professionalEntitlementsAvailable","displayName":"Variable - professionalEntitlementsAvailable","comment":"Calculate number of professional entitlements available.","childId":"FA18A55E-D2E3-4447-9923-47D3C4FFB053","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":2255,"variableGuid":"DAF637D7-1BC5-454B-91D0-C923686FC7A0","operations":[{"id":"set_value","key":"320C2B20-60C2-4594-88B9-7877268F651C","name":"Set value of { variable }","value":"{subtract: {$.lookupItemInList8.units}, $.lookupItemInList8.unitsUsed}"}]},{"id":"FA18A55E-D2E3-4447-9923-47D3C4FFB053","type":"IfElseBlock","disabled":false,"name":"condition34","displayName":"Condition 34","comment":"Are there available Professional entitlements?","childId":"B4828C01-4538-4D88-8542-997113614F70","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.professionalEntitlementsAvailable }","input2":"0","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-162,"y":2375,"childTrueId":"D23EDC21-3FEF-4C93-91A4-B71F395C4B0D","childFalseId":"E2D06476-9E9B-406D-BDE8-A5629A596C1E"},{"id":"B4828C01-4538-4D88-8542-997113614F70","type":"StopBlock","disabled":false,"name":"stop5","displayName":"Stop 5","comment":"Stop the installer as the user will need to log out and log back in for the change to propagate.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":3615},{"id":"D23EDC21-3FEF-4C93-91A4-B71F395C4B0D","type":"FormBlock","disabled":false,"name":"inputs12","displayName":"Inputs 12","comment":"Automatically change entitlement?","childId":"12BBA32B-B07F-4576-9B03-C66B745F3331","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":2455,"form":[{"id":"inputs12-input-0","type":"select","label":"Should this installer allocate a Professional entitlement to the executing user now?","order":0,"values":"Yes,No","options":[],"helpText":"The executing user ({$.searchUsers[0].name}) does not have a \"Professional\" license entitlement assigned to them, which is one of the prerequisites of this installer. Note that the installer will still stop after this step as it is required that the user log out and log back in for the entitlement change to propagate.","isRequired":true}],"persistData":"no"},{"id":"12BBA32B-B07F-4576-9B03-C66B745F3331","type":"IfElseBlock","disabled":false,"name":"condition23","displayName":"Condition 23","comment":"Automatically change entitlement.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.inputs12.'Should this installer allocate a Professional entitlement to the executing user now?'}","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-42,"y":2575,"childTrueId":"371EC647-B054-4A8B-8459-8CF6072624D2","childFalseId":"70B70BCD-3627-4774-BB8C-50D6236E4E58"},{"id":"371EC647-B054-4A8B-8459-8CF6072624D2","type":"IfElseBlock","disabled":false,"name":"condition35","displayName":"Condition 35","comment":"Do they have an Analyzer entitlement currently?","childId":"81D44523-5D34-42CF-9C19-E362BB1E098B","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.lookupItemInList5}","input2":"analyzer","operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":78,"y":2655,"childTrueId":"C66B7BF5-D83D-4829-8E29-7FDEEFAB6BBE","childFalseId":"D2D3B786-5AFD-4433-9EE0-501E735CBF10"},{"id":"81D44523-5D34-42CF-9C19-E362BB1E098B","type":"ShowBlock","disabled":false,"name":"output16","displayName":"Output 16","comment":"Log out and log back in.","childId":null,"inputs":[{"id":"input","value":"Please log out of Qlik Cloud and log back in for the entitlement change to propagate. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":78,"y":3055},{"id":"C66B7BF5-D83D-4829-8E29-7FDEEFAB6BBE","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest2","displayName":"Qlik Cloud Services - Raw API Request 2","comment":"Modify user a entitlement from Analyzer to Professional.","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"licenses/assignments/actions/update","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n  \"update\": [\n    {\n      \"sourceType\": \"analyzer\",\n      \"type\": \"professional\",\n      \"subject\": \"{$.searchUsers[0].subject}\"\n    }\n  ]\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":198,"y":2735,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"D2D3B786-5AFD-4433-9EE0-501E735CBF10","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest3","displayName":"Qlik Cloud Services - Raw API Request 3","comment":"Allocate user a Professional entitlement.","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"licenses/assignments/actions/add","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\"add\":[{\"type\":\"professional\",\"subject\":\"{$.searchUsers[0].subject}\"}]}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":198,"y":2895,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"70B70BCD-3627-4774-BB8C-50D6236E4E58","type":"ShowBlock","disabled":false,"name":"output13","displayName":"Output 13","comment":"Prequisites not met","childId":null,"inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| User has a **Professional** entitlement assigned | ❌ |\n{linebreak}\n{linebreak}\nPlease ensure that the executing user ({$.searchUsers[0].name}) is assigned a \"Professional\" entitlement before running this installer again. Ensure that the user has logged out of Qlik Cloud and logged back in for the entitlement change to propagate. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":78,"y":3215},{"id":"E2D06476-9E9B-406D-BDE8-A5629A596C1E","type":"ShowBlock","disabled":false,"name":"output20","displayName":"Output 20","comment":"Prequisites not met","childId":null,"inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| User has a **Professional** entitlement assigned | ❌ |\n{linebreak}\n{linebreak}\nThere are no available \"Professional\" entitlements on this tenant. Please ensure that the executing user ({ $.searchUsers[0].name }) is assigned a  \"Professional\" entitlement before running this installer again. Ensure that the user has logged out of Qlik Cloud and logged back in for the entitlement change to propagate. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":3455},{"id":"AA1FF9DF-C627-4C2B-AEFA-6C66332E9A33","type":"IfElseBlock","disabled":false,"name":"condition173","displayName":"Condition 173","comment":"Does the executing user have a basicUser entitlement?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.lookupItemInList16 }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":-162,"y":3775,"childTrueId":"B5B8359C-109C-455F-90A9-6BEB4234F2A4","childFalseId":null},{"id":"B5B8359C-109C-455F-90A9-6BEB4234F2A4","type":"ShowBlock","disabled":false,"name":"output152","displayName":"Output 152","comment":"Prequisites not met","childId":"94F9E543-58BE-44FF-80F2-2AF4D653B099","inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| User has a **Full User** entitlement assigned | ❌ |\n{linebreak}\n{linebreak}\nTo complete this installer, please ensure the user ({ $.searchUsers[0].name }) is assigned a \"Full User\" entitlement. Ensure that the user has logged out of Qlik Cloud and logged back in for the entitlement change to propagate. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":3855},{"id":"94F9E543-58BE-44FF-80F2-2AF4D653B099","type":"StopBlock","disabled":false,"name":"stop22","displayName":"Stop 22","comment":"Stop the installer as the user will need to log out and log back in for the change to propagate.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":3975},{"id":"D110F237-615C-4413-9705-1DC39D591DA0","type":"GotoBlock","disabled":false,"name":"goToLabel2","displayName":"Go To Label 2","comment":"","childId":null,"inputs":[{"id":"label","value":"AA75E4A7-C6DD-41D8-B052-4938AA351391","type":"select","displayValue":"TenantSettings","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-402,"y":6735},{"id":"81644390-C70C-4B3A-A798-131469C14FC3","type":"EndpointBlock","disabled":false,"name":"createAutomation","displayName":"Qlik Cloud Services - Create Automation","comment":"Create automation with JSON ","childId":"FE68E09E-D2B7-4F08-A00C-8C1FBCD2A21D","inputs":[{"id":"232befc0-d025-11ec-a748-91ccd794dccb","value":"{ $.filterList6.item.'file name' }","type":"string","structure":[]},{"id":"2a202480-d025-11ec-9540-7766f5f4a17f","value":null,"type":"string","structure":[]},{"id":"20409e30-2833-11ed-bc5f-f13e86c5c276","value":"{ $.callURL2 }","type":"string","structure":[]},{"id":"2b723a50-2833-11ed-a670-b786f7e00bcc","value":null,"type":"string","structure":[]},{"id":"23518c10-6ba4-11f0-b8b7-3d5c6919a381","value":null,"type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":1099,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"fb79f2d0-d024-11ec-b5a3-394cdb5edde2","endpoint_role":"create"},{"id":"FB311B53-0710-4000-A540-9F33CA51C348","type":"EndpointBlock","disabled":false,"name":"getUser","displayName":"Qlik Cloud Services - Get User","comment":"","childId":"9B0A89A5-2944-43D2-A2C1-A1318E22159E","inputs":[{"id":"8eedf1d0-c7a5-11ea-9022-0fb2ce625902","value":"{ $.getCurrentUserId }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-282,"y":455,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"7e670290-c7a5-11ea-9a9c-6dd2b282df86","endpoint_role":"get"},{"id":"84FDC704-B12B-4CA7-82B9-5BB69433CC85","type":"EndpointBlock","disabled":false,"name":"listMembersFromSpace","displayName":"Qlik Cloud Services - List Members From Space","comment":"Get user from space","childId":"8DEB4AAA-3835-46FC-9DB2-E011C9C65EED","inputs":[{"id":"358ee8a0-6d34-11eb-b1f3-91a0d7274b22","value":"{ $.oSettings.sharedSpaceId }","type":"string","structure":[]},{"id":"86f34440-dd7e-11ef-91d1-63f16d094078","value":"{ $.getUser.id }","type":"string","structure":[]},{"id":"972a9800-dd7e-11ef-95ae-93a368f4ba58","value":"9fecb2a0-dd7e-11ef-85d3-9f8aefa67848","type":"select","displayValue":"user","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":1084,"y":430,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"ffe6d930-6d33-11eb-ad8a-334e25c5e295","endpoint_role":"list"},{"id":"A50FEC97-2D69-4865-8CF9-E25BA46D2B2D","type":"GotoBlock","disabled":false,"name":"goToLabel3","displayName":"Go To Label 3","comment":"","childId":null,"inputs":[{"id":"label","value":"A33E0428-F408-4AE5-B66F-4A0AD09BEFCF","type":"select","displayValue":"SpaceChooser","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":709,"y":444},{"id":"8DEB4AAA-3835-46FC-9DB2-E011C9C65EED","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList3","displayName":"Lookup in Qlik Cloud Services - List Members From Space - Lookup Item In List 3","comment":"Check if needed role exists for user assignment","childId":"FD7D0EBA-E8BC-4D1E-89C0-6AC0F3C47707","inputs":[{"id":"list","value":"{ $.listMembersFromSpace }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"roles","input2":"producer","operator":"inList"},{"input1":"roles","input2":"facilitator","operator":"inList"},{"input1":"roles","input2":"codeveloper","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[],"x":1084,"y":550},{"id":"831B4214-8B19-4A5C-AF8A-43C0E2CAD178","type":"EndpointBlock","disabled":false,"name":"updateRolesOfMemberFromSpace","displayName":"Qlik Cloud Services - Update Roles Of Member From Space","comment":"","childId":"E14BE596-C026-4F4A-A4D8-69854E995DAD","inputs":[{"id":"8c6b43e0-6d42-11eb-85f6-917131a7d145","value":"{ $.oSettings.sharedSpaceId }","type":"string","structure":[]},{"id":"8c72c230-6d42-11eb-837d-b1e5663f20d2","value":"{ $.listMembersFromSpace[0].id }","type":"string","structure":[]},{"id":"01ac8e60-6d43-11eb-9d02-4d69db8c0501","value":"[\"producer\", \"consumer\", \"dataconsumer\", \"facilitator\", \"codeveloper\"]","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1324,"y":1550,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"8c54ade0-6d42-11eb-b3a8-75befcc89b0a","endpoint_role":"update"},{"id":"6323E0D4-D064-4F24-84DE-17C602A00C42","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"Check if user exists in space","childId":"B65224C3-49F3-4E55-B29B-183EFEF59103","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.listMembersFromSpace }","input2":null,"operator":"empty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1084,"y":1030,"childTrueId":"7CCD456C-4573-4360-ABC8-B74C5B92BF62","childFalseId":null},{"id":"E14BE596-C026-4F4A-A4D8-69854E995DAD","type":"ShowBlock","disabled":false,"name":"output2","displayName":"Output 2","comment":"","childId":null,"inputs":[{"id":"input","value":"We've updated your roles in the space: { $.lookupItemInList.name }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1324,"y":1670},{"id":"4A46A97C-2B46-4457-A8CD-D4368324D474","type":"GotoBlock","disabled":false,"name":"goToLabel4","displayName":"Go To Label 4","comment":"","childId":null,"inputs":[{"id":"label","value":"FA4255DC-5EAC-4344-B954-C1EDE8113BB1","type":"select","displayValue":"AppInstaller","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2650,"y":2279},{"id":"A33E0428-F408-4AE5-B66F-4A0AD09BEFCF","type":"LabelBlock","disabled":false,"name":"label5","displayName":"Label - SpaceChooser","comment":"","childId":"3616D65D-1152-40D9-BB3C-13A53336D298","inputs":[{"id":"name","value":"SpaceChooser","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1084,"y":-50},{"id":"B65224C3-49F3-4E55-B29B-183EFEF59103","type":"GotoBlock","disabled":false,"name":"goToLabel6","displayName":"Go To Label 6","comment":"","childId":null,"inputs":[{"id":"label","value":"CA4B9459-42B5-4D20-A81B-B9CC807511E9","type":"select","displayValue":"ConnectionCreator","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1084,"y":1910},{"id":"CA4B9459-42B5-4D20-A81B-B9CC807511E9","type":"LabelBlock","disabled":false,"name":"label7","displayName":"Label - ConnectionCreator","comment":"","childId":"277CF126-2469-46E3-8AFF-09F8497D7BED","inputs":[{"id":"name","value":"ConnectionCreator","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1494,"y":-65},{"id":"0C739124-B462-4473-9292-EAB698C36A56","type":"EndpointBlock","disabled":false,"name":"listDataConnections","displayName":"Qlik Cloud Services - List Data Connections","comment":"","childId":"38C7C7A3-2C64-4B14-BFED-40A3971226AB","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":1614,"y":2635,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"2c30aa50-4f34-11eb-9ed0-85d3ebe3b610","endpoint_role":"list"},{"id":"38C7C7A3-2C64-4B14-BFED-40A3971226AB","type":"FilterListBlock","disabled":false,"name":"filterList3","displayName":"Filter over Qlik Cloud Services - List Data Connections - Filter List 3","comment":"Find all Bitmetric connections","childId":"C6D0883B-8224-4BFC-B027-6C3C176779F2","inputs":[{"id":"list","value":"{ $.listDataConnections }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"qName","input2":"Bitmetric_Qlik","operator":"contain"}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":2755,"loopBlockId":"53B2A65B-0A04-4DB2-B300-9E56DF68B0B0"},{"id":"DDC4D2E4-B37A-4BB4-96F8-F2A03F4997BA","type":"IfElseBlock","disabled":false,"name":"condition9","displayName":"Condition 9","comment":"Whether Developer is assigned.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.userIsDeveloper}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":true},{"name":"no","isCollapsed":false}],"x":-282,"y":5195,"childTrueId":null,"childFalseId":"27CFD467-A17C-4DFB-9899-ECD66A80B532"},{"id":"27CFD467-A17C-4DFB-9899-ECD66A80B532","type":"FormBlock","disabled":false,"name":"inputs3","displayName":"Inputs 3","comment":"Should the Developer role be auto-applied?","childId":"2DFD6394-C366-432D-A184-565DFF1333BE","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":5275,"form":[{"id":"inputs3-input-0","type":"select","label":"Should this installer add the Developer role to the executing user now?","order":0,"values":"Yes,No","options":[],"helpText":"The executing user ({$.searchUsers[0].name}) does not have the Developer role assigned, which is one of the prerequisites for the installers applications. This role is required to proceed as API keys are required for the data connection, and in order to create an API key, the Developer role is required. If 'No' is selected, this step will need to be done manually and the installer will exit. Note that the installer will still stop after this step regardless as it is required that the user log out and log back in for the role change to propagate in Qlik Application Automation.","isRequired":true}],"persistData":"no"},{"id":"2DFD6394-C366-432D-A184-565DFF1333BE","type":"IfElseBlock","disabled":false,"name":"condition2","displayName":"Condition 2","comment":"Should the Developer role be auto-applied?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.inputs3.'Should this installer add the Developer role to the executing user now?'}","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-162,"y":5395,"childTrueId":"15E4303B-5022-4B4B-ADC1-3266F23C249F","childFalseId":"F1165B07-6B9C-42FB-BD2E-E97AEDF102E2"},{"id":"15E4303B-5022-4B4B-ADC1-3266F23C249F","type":"ForEachBlock","disabled":false,"name":"loop5","displayName":"Loop 5","comment":"Loop over each existing user role to build payload.","childId":"C927674A-01FF-4588-8C32-521826EEA8D7","inputs":[{"id":"input","value":"{$.searchUsers[0].assignedRoles}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":5475,"loopBlockId":"09FA5BC9-779E-43DA-A2C2-4E4319B2E294"},{"id":"C927674A-01FF-4588-8C32-521826EEA8D7","type":"VariableBlock","disabled":false,"name":"userRoleList","displayName":"Variable - userRoleList","comment":"Merge in Developer role name.","childId":"3D907D53-BD02-4358-A371-463259266295","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":5735,"variableGuid":"863C85BA-EA65-481C-8810-827FB5CA52AD","operations":[{"id":"add_item","key":"D515749E-8452-45F6-A126-A8DAECBFF9E5","name":"Add item to { variable }","value":"{object: '{\"name\":\"Developer\"}'}"}]},{"id":"3D907D53-BD02-4358-A371-463259266295","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest5","displayName":"Qlik Cloud Services - Raw API Request 5","comment":"Apply Developer role.","childId":"08C003D9-5316-4CF3-BCB2-3C195896D7DC","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"users/{$.getCurrentUserId}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba274f0-2072-11ec-a822-69fa394acb82","type":"select","displayValue":"PATCH","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"[{\"op\":\"replace\",\"path\":\"/assignedRoles\",\"value\":{json: {$.userRoleList}}}]","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":5855,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"08C003D9-5316-4CF3-BCB2-3C195896D7DC","type":"ShowBlock","disabled":false,"name":"output91","displayName":"Output 91","comment":"Log out and log back in.","childId":"6E79789E-CB26-4FE5-8C15-F948ECB1C2AA","inputs":[{"id":"input","value":"Please log out of Qlik Cloud and log back in for the Developer role change to propagate in Qlik Application Automation. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":5975},{"id":"6E79789E-CB26-4FE5-8C15-F948ECB1C2AA","type":"StopBlock","disabled":false,"name":"stop15","displayName":"Stop 15","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":6095},{"id":"09FA5BC9-779E-43DA-A2C2-4E4319B2E294","type":"VariableBlock","disabled":false,"name":"userRoleList","displayName":"Variable - userRoleList","comment":"Add each existing user role name.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":78,"y":5575,"variableGuid":"863C85BA-EA65-481C-8810-827FB5CA52AD","operations":[{"id":"add_item","key":"92BDB30F-B698-4E17-9535-D0E6AA43A090","name":"Add item to { variable }","value":"{object: '{\"name\":\"{ $.loop5.item.name }\"}'}"}]},{"id":"F1165B07-6B9C-42FB-BD2E-E97AEDF102E2","type":"ShowBlock","disabled":false,"name":"output21","displayName":"Output 21","comment":"Prequisites not met","childId":"116BDF5A-03A2-4CCA-A0E0-5FD15F607FC8","inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| User has the **Developer** role assigned | ❌ |\n{linebreak}\n{linebreak}\nThe executing user ({ $.searchUsers[0].name }) is required to have the Developer role, which is a prerequisite of the Qlik Cloud monitoring applications. Ensure that the executing user has the Developer role and then this installer can be run again. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":6255},{"id":"116BDF5A-03A2-4CCA-A0E0-5FD15F607FC8","type":"StopBlock","disabled":false,"name":"stop3","displayName":"Stop 3","comment":"Stopping...","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-42,"y":6375},{"id":"0DA71B63-D140-4F95-AF9A-78291885AEA4","type":"IfElseBlock","disabled":false,"name":"condition8","displayName":"Condition 8","comment":"Is Developer assigned directly?","childId":"DDC4D2E4-B37A-4BB4-96F8-F2A03F4997BA","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.searchUsers[0].assignedRoles[*].name}","input2":"Developer","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-282,"y":4375,"childTrueId":"A05335DC-F763-4244-9305-749EAF525B37","childFalseId":"7C878D77-4598-4BC6-A349-3CD60119E9E5"},{"id":"A05335DC-F763-4244-9305-749EAF525B37","type":"VariableBlock","disabled":false,"name":"userIsDeveloper","displayName":"Variable - userIsDeveloper","comment":"Yes","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":4455,"variableGuid":"D7788911-1C29-4B01-9CBF-B371257F45F8","operations":[{"id":"set_value","key":"CDCB85C8-FB0C-4605-BA99-8FB0FE00044E","name":"Set value of { variable }","value":"1"}]},{"id":"7C878D77-4598-4BC6-A349-3CD60119E9E5","type":"ForEachBlock","disabled":false,"name":"loop2","displayName":"Loop 2","comment":"Is Developer inherited from a group?","childId":null,"inputs":[{"id":"input","value":"{$.searchUsers[0].assignedGroups}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-162,"y":4615,"loopBlockId":"7E95BC9A-FADE-48B3-B48E-F3CD09EC7AC8"},{"id":"7E95BC9A-FADE-48B3-B48E-F3CD09EC7AC8","type":"IfElseBlock","disabled":false,"name":"condition10","displayName":"Condition 10","comment":"Does the assigned group contain Developer?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.loop2.item.assignedRoles[*].name}","input2":"Developer","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":-42,"y":4715,"childTrueId":"EE4E2A5D-D056-436A-9AFC-5152B6AF837D","childFalseId":null},{"id":"EE4E2A5D-D056-436A-9AFC-5152B6AF837D","type":"VariableBlock","disabled":false,"name":"userIsDeveloper","displayName":"Variable - userIsDeveloper","comment":"Yes","childId":"38066B15-297C-48E2-8897-0A8AB30EA33D","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":78,"y":4795,"variableGuid":"D7788911-1C29-4B01-9CBF-B371257F45F8","operations":[{"id":"set_value","key":"CDCB85C8-FB0C-4605-BA99-8FB0FE00044E","name":"Set value of { variable }","value":"1"}]},{"id":"38066B15-297C-48E2-8897-0A8AB30EA33D","type":"ForEachBreakBlock","disabled":false,"name":"exitLoop2","displayName":"Exit Loop 2","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":78,"y":4915},{"id":"AA75E4A7-C6DD-41D8-B052-4938AA351391","type":"LabelBlock","disabled":false,"name":"label8","displayName":"Label - TenantSettings","comment":"Get TenantSettings","childId":"8E5B671A-C3AE-4BC5-B01B-B9F5FBBF08B7","inputs":[{"id":"name","value":"TenantSettings","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":109,"y":-3},{"id":"8E5B671A-C3AE-4BC5-B01B-B9F5FBBF08B7","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"","childId":"60F3149C-6498-404C-91EC-EFE6F81EC13C","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":109,"y":117,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"E123DF77-84B3-4C4A-8440-B4A013CE6A1B","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest4","displayName":"Qlik Cloud Services - Raw API Request 4","comment":"Check if API keys are enabled","childId":"FB59AB4E-E21C-4437-A510-C9FE694E3797","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys/configs/{$.getCurrentTenantInfo.id}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":229,"y":317,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"FB59AB4E-E21C-4437-A510-C9FE694E3797","type":"IfElseBlock","disabled":false,"name":"condition11","displayName":"Condition 11","comment":"Are API keys enabled on the tenant, or has tenant been migrated through TLV-750?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{$.rawAPIRequest4.api_keys_enabled}","input2":"true","operator":"isTrue"},{"input1":"{ textlength: {$.rawAPIRequest4.api_keys_enabled} }","input2":"0","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":true},{"name":"no","isCollapsed":false}],"x":229,"y":437,"childTrueId":null,"childFalseId":"EDB3D97B-CCA4-4F19-A48F-93666F637C30"},{"id":"EDB3D97B-CCA4-4F19-A48F-93666F637C30","type":"FormBlock","disabled":false,"name":"inputs10","displayName":"Inputs 10","comment":"Should this installer enable API keys on this tenant?","childId":"5C8B9C61-49BC-49DD-955C-097D1BCEF872","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":349,"y":517,"form":[{"id":"inputs10-input-0","type":"select","label":"Should this installer enable API keys on this tenant now?","order":0,"values":"Yes,No","options":[],"helpText":"API keys are not currently enabled on this tenant, which is a prerequisite of the installer. An API key is required to create the data connection to Qlik Cloud that the apps leverage. If 'No' is selected, this will need to be done manually, and the installer will exit.","isRequired":true}],"persistData":"no"},{"id":"5C8B9C61-49BC-49DD-955C-097D1BCEF872","type":"IfElseBlock","disabled":false,"name":"condition12","displayName":"Condition 12","comment":"Yes","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.inputs10.'Should this installer enable API keys on this tenant now?'}","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":349,"y":637,"childTrueId":"E7B67D4C-4FE8-487A-92DB-CB8EAEF3E16D","childFalseId":"D85ACC8E-6A9B-40B4-A98C-1BD8716E2A22"},{"id":"E7B67D4C-4FE8-487A-92DB-CB8EAEF3E16D","type":"FormBlock","disabled":false,"name":"inputs17","displayName":"Inputs 17","comment":"API key expiration.","childId":"E4CAB747-F88B-4DD3-9EB0-675DABBC3E63","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":717,"form":[{"id":"inputs17-input-0","type":"select","label":"What should the maximum API key expiration be set to in days?","order":0,"values":"365,180,90,60,30,7","options":[],"helpText":"Note that the API key will need to be rotated for the data connection that the monitoring applications use within the timeframe that is set. This can be an automated process, but will need to be run within the window set above.","isRequired":true}],"persistData":"no"},{"id":"E4CAB747-F88B-4DD3-9EB0-675DABBC3E63","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest6","displayName":"Qlik Cloud Services - Raw API Request 6","comment":"Enable API keys.","childId":"474210F2-EF22-4D34-96BD-C5730A83F8C4","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys/configs/{$.getCurrentTenantInfo.id}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba274f0-2072-11ec-a822-69fa394acb82","type":"select","displayValue":"PATCH","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"[{\"op\":\"replace\",\"path\":\"/api_keys_enabled\",\"value\":true}]","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":837,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"474210F2-EF22-4D34-96BD-C5730A83F8C4","type":"SleepBlock","disabled":false,"name":"sleep13","displayName":"Sleep 13","comment":"","childId":"8D995013-0E1A-4085-966B-BC1F0883615D","inputs":[{"id":"time","value":"2","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":957},{"id":"8D995013-0E1A-4085-966B-BC1F0883615D","type":"VariableBlock","disabled":false,"name":"apiKeyExpiry","displayName":"Variable - apiKeyExpiry","comment":"Set the expiration of the API keys.","childId":"98D5AD2C-405A-47F8-8329-95A82B1091EC","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":1077,"variableGuid":"388E1309-C1A8-46A6-B408-C39610475933","operations":[{"id":"set_value","key":"A28226D6-B650-4050-887C-2E49B64CE4DF","name":"Set value of { variable }","value":"P{$.inputs17.'What should the maximum API key expiration be set to in days?'}D"}]},{"id":"98D5AD2C-405A-47F8-8329-95A82B1091EC","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest7","displayName":"Qlik Cloud Services - Raw API Request 7","comment":"Set expiry.","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys/configs/{$.getCurrentTenantInfo.id}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba274f0-2072-11ec-a822-69fa394acb82","type":"select","displayValue":"PATCH","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"[{\"op\":\"replace\",\"path\":\"/max_api_key_expiry\",\"value\":\"{$.apiKeyExpiry}\"}]","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":1197,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"D85ACC8E-6A9B-40B4-A98C-1BD8716E2A22","type":"ShowBlock","disabled":false,"name":"output8","displayName":"Output 8","comment":"Prequisites not met","childId":"4EB2EAA1-2171-4A46-87A5-331AB2ECCDAA","inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| **API keys** are enabled on the tenant | ❌ |\n{linebreak}\n{linebreak}\nAPI keys being enabled is a prerequisite of the Qlik Cloud monitoring applications. Ensure that API keys are enabled on this tenant and then this installer can be run again. Existing the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":1357},{"id":"4EB2EAA1-2171-4A46-87A5-331AB2ECCDAA","type":"StopBlock","disabled":false,"name":"stop","displayName":"Stop","comment":"Stopping...","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":469,"y":1477},{"id":"4EBAB262-B52F-4ABD-8CED-D67E2E5FD073","type":"GotoBlock","disabled":false,"name":"goToLabel5","displayName":"Go To Label 5","comment":"","childId":null,"inputs":[{"id":"label","value":"51B1926E-C6AB-4FB4-BA82-5716BA6B4E5E","type":"select","displayValue":"SpaceSettings","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":109,"y":1797},{"id":"D521F735-199C-455D-98BF-70741CA3562F","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest13","displayName":"Qlik Cloud Services - Raw API Request 13","comment":"Get list of API keys owned by the user.","childId":"A7BE6CAC-C896-4C9F-AD0B-C7DADCD709CA","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"createdByUser","value":"{$.getCurrentUserId}"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":255,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"A9386215-82DE-498F-8BA9-12F200B058C8","type":"IfElseBlock","disabled":false,"name":"condition3","displayName":"Condition 3","comment":"Check if bitmetric_KEY exists","childId":"DA24DC07-5751-42C1-9585-2ACECBEA803C","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList5 }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":true},{"name":"no","isCollapsed":false}],"x":1614,"y":875,"childTrueId":null,"childFalseId":"FE92211D-D4D7-4A78-8C27-58CAE062B8A9"},{"id":"FE92211D-D4D7-4A78-8C27-58CAE062B8A9","type":"FormBlock","disabled":false,"name":"inputs4","displayName":"Inputs 4","comment":"","childId":"B52DA825-8ECE-4AD2-B04A-428ACF4A10C3","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1734,"y":955,"form":[{"id":"inputs4-input-0","type":"select","label":"We did not find an API-KEY, Can we install this?","order":0,"values":"Yes,No","options":[],"helpText":null,"isRequired":true}],"persistData":"no"},{"id":"B52DA825-8ECE-4AD2-B04A-428ACF4A10C3","type":"IfElseBlock","disabled":false,"name":"condition4","displayName":"Condition 4","comment":"Can we install the KEY?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.inputs4.'We did not find an API-KEY, Can we install this?' }","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":1734,"y":1075,"childTrueId":"447B4834-989C-4104-BC43-F54272D5C4E0","childFalseId":"A924F0A6-DAAF-40E1-A44A-8B3A97127914"},{"id":"007D5659-3DED-4191-B77F-3B8395C146F2","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest8","displayName":"Qlik Cloud Services - Raw API Request 8","comment":"DELETE API KEY","childId":"62B50BB9-C689-4A0D-9D11-2D25C7EDA4FD","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys/{ $.filterList5.item.id }","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"DELETE","type":"select","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1734,"y":595,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"A924F0A6-DAAF-40E1-A44A-8B3A97127914","type":"ShowBlock","disabled":false,"name":"output9","displayName":"Output 9","comment":"Prequisites not met","childId":"05E4B2E1-6B96-45B2-B255-E27170F1B024","inputs":[{"id":"input","value":"{linebreak}\n##### A prerequisite has not been met\n\n| Prerequisite | Prerequisite Met |\n| --- | --- |\n| **API keys** not allowed to make | ❌ |\n{linebreak}\n{linebreak}\nWe need to make an API KEY. \nExiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":1315},{"id":"05E4B2E1-6B96-45B2-B255-E27170F1B024","type":"StopBlock","disabled":false,"name":"stop4","displayName":"Stop 4","comment":"Stopping...","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":1435},{"id":"62B50BB9-C689-4A0D-9D11-2D25C7EDA4FD","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"autoGenerateAPIKey -- 1","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1734,"y":715,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"1A5A9D0C-8CBD-47E8-8256-AAD13B6CB808","name":"Set key/values of { variable }","value":[{"key":"autoGenerateAPIKey","value":"1"}]}]},{"id":"447B4834-989C-4104-BC43-F54272D5C4E0","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"Generate the API key later.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":1155,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"87A8C685-6A5F-4323-88A7-84C6F8467BEE","name":"Set key/values of { variable }","value":[{"key":"autoGenerateAPIKey","value":"1"}]}]},{"id":"A7BE6CAC-C896-4C9F-AD0B-C7DADCD709CA","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"autoGenerateAPIKey -- 0","childId":"EA2335A4-425E-4C31-B40E-67C566ADED1C","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":375,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"A2309156-3852-4B54-BB09-7F86AE741064","name":"Set key/values of { variable }","value":[{"key":"autoGenerateAPIKey","value":null}]}]},{"id":"DA24DC07-5751-42C1-9585-2ACECBEA803C","type":"IfElseBlock","disabled":false,"name":"condition5","displayName":"Condition 5","comment":"Check if API is going to be created","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.autoGenerateAPIKey}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1614,"y":1675,"childTrueId":"513A2A33-385E-4ACA-96C0-F2E078DE4A8C","childFalseId":null},{"id":"5C0067C4-3329-4C5E-9F4D-CF3BF10884F6","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest9","displayName":"Qlik Cloud Services - Raw API Request 9","comment":"Get max API key expiry.","childId":"03BC2175-AD51-4B40-A6DF-7F720159C918","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys/configs/{$.getCurrentTenantInfo.id}","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":1835,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"03BC2175-AD51-4B40-A6DF-7F720159C918","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest11","displayName":"Qlik Cloud Services - Raw API Request 11","comment":"Generate API key.","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"api-keys","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"description","value":"{ $.oSettings.apiKeyName}"},{"key":"expiry","value":"{$.rawAPIRequest9.max_api_key_expiry}"}],"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":true,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":1955,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"F636B678-0467-4A7B-A024-351402562814","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"update API KEY NAME","childId":"D521F735-199C-455D-98BF-70741CA3562F","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":135,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"15215094-9E88-4B8F-8564-0F10F195F736","name":"Set key/values of { variable }","value":[{"key":"apiKeyName","value":"Bitmetric_APIKEY"}]}]},{"id":"513A2A33-385E-4ACA-96C0-F2E078DE4A8C","type":"IfElseBlock","disabled":false,"name":"condition92","displayName":"Condition 92","comment":"Can any more API keys be made?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.rawAPIRequest4.max_keys_per_user}","input2":"{count: {$.rawAPIRequest13.data}}","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":1734,"y":1755,"childTrueId":"5C0067C4-3329-4C5E-9F4D-CF3BF10884F6","childFalseId":"2EA29A8D-931C-4BB7-82BA-579AF94AEDD5"},{"id":"2EA29A8D-931C-4BB7-82BA-579AF94AEDD5","type":"ShowBlock","disabled":false,"name":"output76","displayName":"Output 76","comment":"No room for more API keys.","childId":"C6838202-372D-441D-ABCF-FE41694F1807","inputs":[{"id":"input","value":"No more API keys can be generated for the executing user, as they have reached the maximum API keys designated per user as designated by this tenant's settings ({$.rawAPIRequest.max_keys_per_user}). This limit must be either increased, or API keys need to be deleted to make room for the new API key. This installer may be re-run afterwards. Exiting the installer...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":2115},{"id":"C6838202-372D-441D-ABCF-FE41694F1807","type":"StopBlock","disabled":false,"name":"stop11","displayName":"Stop 11","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1854,"y":2235},{"id":"EA2335A4-425E-4C31-B40E-67C566ADED1C","type":"FilterListBlock","disabled":false,"name":"filterList5","displayName":"Filter List 5","comment":"","childId":"A9386215-82DE-498F-8BA9-12F200B058C8","inputs":[{"id":"list","value":"{ $.rawAPIRequest13.data }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"description","input2":"{ $.oSettings.apiKeyName}","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":495,"loopBlockId":"007D5659-3DED-4191-B77F-3B8395C146F2"},{"id":"E28BD9FA-1560-4F50-ACD5-D4923DC99827","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest33","displayName":"Qlik Cloud Services - Raw API Request 33","comment":"Create the GET data connection.","childId":"099A35D9-B951-4053-9176-B563A488616B","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"data-connections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n\"dataSourceId\": \"rest\",\n\"qName\": \"Bitmetric_Qlik_GET\",\n\"space\":\"{$.oSettings.sharedSpaceId}\",\n\"connectionProperties\": {\n\"url\": \"https://{$.getCurrentTenantInfo.hostnames[0]}/api/v1/users\",\n\"queryHeaders\": [\n{\n\"name\": \"Authorization\",\n\"value\": \"Bearer {$.rawAPIRequest11.token}\",\n\"encrypt\": true\n}\n],\n\"allowWithConnection\": \"true\"\n}\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":3255,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"EE1D7579-44B0-4B17-9823-CE1BC1B2D58E","type":"CallUrlBlock","disabled":false,"name":"callURL","displayName":"Call URL","comment":"","childId":"CC3A448B-F0D6-42B0-AD9F-2709CC947D93","inputs":[{"id":"url","value":"https://github.com/bitmetric-bv/bitmetric-qvd-viewer/raw/main/manifest/source.json","type":"string","structure":[]},{"id":"method","value":"GET","type":"select","structure":[]},{"id":"timeout","value":"","type":"string","structure":[]},{"id":"params","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"headers","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"encoding","value":"","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"full_response","value":null,"type":"checkbox","structure":[]},{"id":"capitalize_headers","value":true,"type":"checkbox","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":252},{"id":"EF798EA6-89FA-4857-A378-D0B8F9158898","type":"FormBlock","disabled":false,"name":"inputs5","displayName":"Inputs 5","comment":"Get the new products.","childId":"C8D6FEBB-49B3-4154-A7A8-153FB1B15188","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":492,"form":[{"id":"inputs5-input-0","type":"multi_select","label":"Which products do you want to install?","order":0,"values":"{ $.sJSON[*].product }","options":{"default_select_all":true},"helpText":null,"isRequired":true}],"persistData":"no"},{"id":"CC3A448B-F0D6-42B0-AD9F-2709CC947D93","type":"VariableBlock","disabled":false,"name":"sJSON","displayName":"Variable - sJSON","comment":"","childId":"EF798EA6-89FA-4857-A378-D0B8F9158898","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":372,"variableGuid":"42AF1288-2A30-43BD-9F49-EABC5B201234","operations":[{"id":"set_value","key":"C7B45056-514F-44F6-BE14-84059CB7517C","name":"Set value of { variable }","value":"{ $.callURL }"}]},{"id":"C8D6FEBB-49B3-4154-A7A8-153FB1B15188","type":"CompareListsBlock","disabled":false,"name":"compareLists","displayName":"Compare Lists","comment":"Filter only relevant products out.","childId":"53AD3B3F-FE86-48E5-BCD9-39571BD28134","inputs":[{"id":"list1","value":"{ $.sJSON }","type":"string","structure":[]},{"id":"list2","value":"{ $.inputs5.'Which products do you want to install?'.selected }","type":"string","structure":[]}],"settings":[{"id":"list1_unique_key","value":"product","type":"field","structure":[]},{"id":"list2_unique_key","value":"selected","type":"field","structure":[]},{"id":"compare_mode","value":"intersect","type":"select","displayValue":"Intersect (all items that exist in both list1 and list2)","structure":[]},{"id":"case_insensitive","value":null,"type":"checkbox","structure":[]},{"id":"result_mode","value":"list1","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-1026,"y":612,"loopBlockId":null},{"id":"F9194B14-28BF-4AA6-8DF8-5337AC7C7592","type":"LabelBlock","disabled":false,"name":"label9","displayName":"Label - AutomationInstaller","comment":"","childId":"4997227B-6F06-4A61-98CD-1C636F2D6B23","inputs":[{"id":"name","value":"AutomationInstaller","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2650,"y":-81},{"id":"4997227B-6F06-4A61-98CD-1C636F2D6B23","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop","comment":"Install all products","childId":"4A46A97C-2B46-4457-A8CD-D4368324D474","inputs":[{"id":"input","value":"{ $.compareLists }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2650,"y":39,"loopBlockId":"9618D9A5-F82F-41B2-8F70-ABF911F69D98"},{"id":"9618D9A5-F82F-41B2-8F70-ABF911F69D98","type":"FilterListBlock","disabled":false,"name":"filterList6","displayName":"Filter List 6","comment":"Install all files = automation","childId":null,"inputs":[{"id":"list","value":"{ $.loop.item.files }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"automation","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2770,"y":139,"loopBlockId":"1B910F0A-EADD-4B1B-9C94-CB6BDB6EC18E"},{"id":"FE68E09E-D2B7-4F08-A00C-8C1FBCD2A21D","type":"ShowBlock","disabled":false,"name":"output11","displayName":"Output 11","comment":"Comment installation","childId":"C9DAD1A8-1853-4281-9568-5787A7D622E1","inputs":[{"id":"input","value":"Installed automation: { $.filterList6.item.'file name' }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":1219},{"id":"3C1081B4-09D9-46A4-8524-6624716D8082","type":"CallUrlBlock","disabled":false,"name":"callURL2","displayName":"Call URL 2","comment":"Get JSON from automation","childId":"81644390-C70C-4B3A-A798-131469C14FC3","inputs":[{"id":"url","value":"{ $.filterList6.item.source }","type":"string","structure":[]},{"id":"method","value":"GET","type":"select","structure":[]},{"id":"timeout","value":"","type":"string","structure":[]},{"id":"params","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"headers","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"encoding","value":"","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"full_response","value":null,"type":"checkbox","structure":[]},{"id":"capitalize_headers","value":true,"type":"checkbox","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":979},{"id":"FA4255DC-5EAC-4344-B954-C1EDE8113BB1","type":"LabelBlock","disabled":false,"name":"label10","displayName":"Label - AppInstaller","comment":"","childId":"A8DF3AD8-6F5A-437B-8DD8-E33BB13D6785","inputs":[{"id":"name","value":"AppInstaller","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3395,"y":-84},{"id":"A8DF3AD8-6F5A-437B-8DD8-E33BB13D6785","type":"ForEachBlock","disabled":false,"name":"loop3","displayName":"Loop 3","comment":"For each product","childId":"12BF8971-FADB-4632-A2E1-83252D7368E1","inputs":[{"id":"input","value":"{ $.compareLists }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3395,"y":36,"loopBlockId":"DA512CB8-B14B-4B86-92AC-4572E0FF3D77"},{"id":"12BF8971-FADB-4632-A2E1-83252D7368E1","type":"GotoBlock","disabled":false,"name":"goToLabel7","displayName":"Go To Label 7","comment":"","childId":null,"inputs":[{"id":"label","value":"E220868D-1CE7-4D68-A94F-C0AE2A92B571","type":"select","displayValue":"EndMessage","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3395,"y":4036},{"id":"DA512CB8-B14B-4B86-92AC-4572E0FF3D77","type":"FilterListBlock","disabled":false,"name":"filterList7","displayName":"Filter List 7","comment":"For each app","childId":null,"inputs":[{"id":"list","value":"{ $.loop3.item.files }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"type","input2":"app","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3515,"y":136,"loopBlockId":"E0F732B0-FE7D-4DA3-BA03-DB513E8666DE"},{"id":"F42AEA46-E421-4C5F-AC0A-25548B81E61E","type":"CallUrlBlock","disabled":false,"name":"callURL3","displayName":"Call URL 3","comment":"Get QVF","childId":"346D1BBA-A08F-4242-BEA1-C87B8DBF8BC7","inputs":[{"id":"url","value":"{ $.filterList7.item.source }","type":"string","structure":[]},{"id":"method","value":"GET","type":"select","structure":[]},{"id":"timeout","value":"","type":"string","structure":[]},{"id":"params","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"headers","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"encoding","value":"","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"full_response","value":null,"type":"checkbox","structure":[]},{"id":"capitalize_headers","value":true,"type":"checkbox","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":976},{"id":"A78238C3-B9F9-4E4A-AE90-AD93A6E21270","type":"ShowBlock","disabled":false,"name":"output12","displayName":"Output 12","comment":"","childId":"605A957D-B48C-4D11-BCB6-500D8A4196A5","inputs":[{"id":"input","value":"Installed app:{ $.filterList7.item.'file name' }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":1456},{"id":"346D1BBA-A08F-4242-BEA1-C87B8DBF8BC7","type":"VariableBlock","disabled":false,"name":"appBase64","displayName":"Variable - appBase64","comment":"","childId":"EF78DCDB-DB78-417D-9C9A-B572CF21D899","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":1096,"variableGuid":"A05AB10D-4128-40CE-B63B-E44ABB90E9B6","operations":[{"id":"set_value","key":"B918FFC0-A4FA-43B7-9D84-58EC80AE6CD7","name":"Set value of { variable }","value":"{ base64encode: { $.callURL3 } }"}]},{"id":"EF78DCDB-DB78-417D-9C9A-B572CF21D899","type":"EndpointBlock","disabled":false,"name":"importAppFromBase64EncodedFile3","displayName":"Qlik Cloud Services - Import App From Base 64 Encoded File 3","comment":"","childId":"AD21BAF2-0C1A-4010-9CDA-11454E6D4028","inputs":[{"id":"09b520a0-7aa4-11eb-8143-cde65e595ead","value":"{ $.appBase64 }","type":"string","structure":[]},{"id":"19661000-67b1-11eb-b4c6-fb30d89c586f","value":"{ $.filterList7.item.'file name' }","type":"string","structure":[]},{"id":"197675a0-67b1-11eb-b6f6-9ff3bc51ddbf","value":"{$.oSettings.sharedSpaceId}","type":"string","structure":[]},{"id":"4d3a3300-67b1-11eb-99af-3d55175faa9a","value":"5a406580-67b1-11eb-bad4-5f783555fa1b","type":"select","displayValue":"NEW","structure":[]},{"id":"ac4b58f0-67b1-11eb-8126-89d0cf328adb","value":null,"type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":1216,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"194b9430-67b1-11eb-9e04-6dbde84bea83","endpoint_role":"create"},{"id":"E220868D-1CE7-4D68-A94F-C0AE2A92B571","type":"LabelBlock","disabled":false,"name":"label11","displayName":"Label - EndMessage","comment":"","childId":"824B3A09-630C-4318-8434-FFB8951C7641","inputs":[{"id":"name","value":"EndMessage","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":4171,"y":-76},{"id":"53AD3B3F-FE86-48E5-BCD9-39571BD28134","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"Set the right settings in this variable. We will expand this during the load.","childId":"2503E065-AD8D-4F51-BE52-1BF13700161C","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1026,"y":732,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"ADC1E9F8-4D5F-488C-937F-3E67F1055339","name":"Set key/values of { variable }","value":[{"key":"api-key","value":"{ if: { $.compareLists[*].'api-key_required' } inList 'true', 1, 0 }"},{"key":"data-connection","value":"{ if: { $.compareLists[*].'data-connection' } inList 'true', 1, 0 }"},{"key":"tenant-admin","value":"{ if: { $.compareLists[*].'tenant-admin' } inList 'true', 1, 0 }"}]}]},{"id":"14A99950-3427-46EF-87CC-CC778F52EF6E","type":"IfElseBlock","disabled":false,"name":"condition6","displayName":"Condition 6","comment":"check tenant_admin","childId":"A4E1266E-9D03-4F36-BFB7-4892A1D8279E","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.tenant-admin }","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":-402,"y":255,"childTrueId":"5D9FFC3D-D983-4AFB-BB1F-94B3077A51D7","childFalseId":null},{"id":"60F3149C-6498-404C-91EC-EFE6F81EC13C","type":"IfElseBlock","disabled":false,"name":"condition13","displayName":"Condition 13","comment":"Check if API key is required for installation","childId":"4EBAB262-B52F-4ABD-8CED-D67E2E5FD073","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.api-key }","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":109,"y":237,"childTrueId":"E123DF77-84B3-4C4A-8440-B4A013CE6A1B","childFalseId":null},{"id":"536A7052-43DE-4648-BE3B-7CD9537FCFCA","type":"IfElseBlock","disabled":false,"name":"condition14","displayName":"Condition 14","comment":"is developer required for installation?","childId":"D110F237-615C-4413-9705-1DC39D591DA0","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.api-key}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-402,"y":4295,"childTrueId":"0DA71B63-D140-4F95-AF9A-78291885AEA4","childFalseId":null},{"id":"277CF126-2469-46E3-8AFF-09F8497D7BED","type":"IfElseBlock","disabled":false,"name":"condition15","displayName":"Condition 15","comment":"Check if api-key needs to be created","childId":"F7AD8EA5-4D84-47E1-9294-87A20C9F2802","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.api-key}","input2":"1","operator":"="},{"input1":"{ $.oSettings.data-connection}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1494,"y":55,"childTrueId":"F636B678-0467-4A7B-A024-351402562814","childFalseId":null},{"id":"B7C7B3BE-42FB-42E1-9684-742BD7DC3E6C","type":"GotoBlock","disabled":false,"name":"goToLabel8","displayName":"Go To Label 8","comment":"","childId":null,"inputs":[{"id":"label","value":"77B998E1-FE3A-4448-B891-6162E696345F","type":"select","displayValue":"TagChecker","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1494,"y":3535},{"id":"4DB3721B-FADD-411C-ADAA-E05600D115E7","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"","childId":"84FDC704-B12B-4CA7-82B9-5BB69433CC85","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1084,"y":310,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"F97BBDCE-F7D9-422A-A516-696E329723C5","name":"Set key/values of { variable }","value":[{"key":"sharedSpaceId","value":"{ $.lookupItemInList.id }"}]}]},{"id":"7ED67342-3D7F-4FAD-B126-61DF5F7E7D77","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest34","displayName":"Qlik Cloud Services - Raw API Request 34","comment":"Create the POST data connection.","childId":"E28BD9FA-1560-4F50-ACD5-D4923DC99827","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"data-connections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":"{\n\"dataSourceId\": \"rest\",\n\"qName\": \"Bitmetric_Qlik_POST\",\n\"space\":\"{$.oSettings.sharedSpaceId}\",\n\"connectionProperties\": {\n\"url\": \"https://{$.getCurrentTenantInfo.hostnames[0]}/api/v1/users/actions/filter\",\n\"method\":\"POST\",\n\"requestBody\" : \"{\\\"filter\\\" : \\\"(status eq \\\\\\\"active\\\\\\\" or status eq \\\\\\\"deleted\\\\\\\")\\\"}\",\n\"queryHeaders\": [\n{\n\"name\": \"Authorization\",\n\"value\": \"Bearer {$.rawAPIRequest11.token}\",\n\"encrypt\": true\n}\n],\n\"allowWithConnection\": \"true\"\n}\n}","type":"object","mode":"raw","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":3135,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"F7AD8EA5-4D84-47E1-9294-87A20C9F2802","type":"IfElseBlock","disabled":false,"name":"condition16","displayName":"Condition 16","comment":"Check if data-connection needs to be created","childId":"B7C7B3BE-42FB-42E1-9684-742BD7DC3E6C","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.oSettings.data-connection}","input2":"1","operator":"="},{"input1":"{ $.oSettings.api-key}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1494,"y":2555,"childTrueId":"0C739124-B462-4473-9292-EAB698C36A56","childFalseId":null},{"id":"C6D0883B-8224-4BFC-B027-6C3C176779F2","type":"ShowBlock","disabled":false,"name":"output3","displayName":"Output 3","comment":"","childId":"7ED67342-3D7F-4FAD-B126-61DF5F7E7D77","inputs":[{"id":"input","value":"CREATING CONNECTIONS","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":3015},{"id":"53B2A65B-0A04-4DB2-B300-9E56DF68B0B0","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest10","displayName":"Qlik Cloud Services - Raw API Request 10","comment":"DELETE CONNECTION","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"data-connections/{ $.filterList3.item.qID }","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"DELETE","type":"select","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1734,"y":2855,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"099A35D9-B951-4053-9176-B563A488616B","type":"ShowBlock","disabled":false,"name":"output4","displayName":"Output 4","comment":"","childId":null,"inputs":[{"id":"input","value":"All connections made","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1614,"y":3375},{"id":"6C33F19C-5C02-4C2B-8449-EB176E2E8FBC","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest18","displayName":"Qlik Cloud Services - Raw API Request 18","comment":"Check if tag exists.","childId":"4C6E1F33-DDE7-486E-A843-B9D6B0B3AE90","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"name","value":"{ $.loop4.item }"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2238,"y":369,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"F7E81BA7-745E-435B-8069-93037618A6BC","type":"ForEachBlock","disabled":false,"name":"loop4","displayName":"Loop 4","comment":"For each tag","childId":null,"inputs":[{"id":"input","value":"{ $.loop6.item.'tag name' }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2118,"y":269,"loopBlockId":"6C33F19C-5C02-4C2B-8449-EB176E2E8FBC"},{"id":"77B998E1-FE3A-4448-B891-6162E696345F","type":"LabelBlock","disabled":false,"name":"label","displayName":"Label - TagChecker","comment":"Part to check if tags already exists","childId":"8D31E475-182F-408A-A579-06751DB427BB","inputs":[{"id":"name","value":"TagChecker","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1998,"y":-71},{"id":"55417A50-7B36-4250-BB91-7AD2F3379AB3","type":"ForEachBlock","disabled":false,"name":"loop6","displayName":"Loop 6","comment":"For each product","childId":"AD58873E-4E30-4434-9656-3F64977C7BCD","inputs":[{"id":"input","value":"{ $.compareLists }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1998,"y":169,"loopBlockId":"F7E81BA7-745E-435B-8069-93037618A6BC"},{"id":"4C6E1F33-DDE7-486E-A843-B9D6B0B3AE90","type":"IfElseBlock","disabled":false,"name":"condition18","displayName":"Condition 18","comment":"Create when not exists","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.rawAPIRequest18.data }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":2238,"y":489,"childTrueId":"DA029509-4B29-4CF0-B865-750A11B8814D","childFalseId":"F13BBDAA-E789-453F-A404-018D3E3DBF30"},{"id":"F13BBDAA-E789-453F-A404-018D3E3DBF30","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest19","displayName":"Qlik Cloud Services - Raw API Request 19","comment":"Check if tag exists.","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"name","value":"{ $.loop4.item }"},{"key":"type","value":"public"}],"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2358,"y":849,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"AD58873E-4E30-4434-9656-3F64977C7BCD","type":"GotoBlock","disabled":false,"name":"goToLabel9","displayName":"Go To Label 9","comment":"","childId":null,"inputs":[{"id":"label","value":"F9194B14-28BF-4AA6-8DF8-5337AC7C7592","type":"select","displayValue":"AutomationInstaller","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1998,"y":1129},{"id":"F48A1720-D507-4C7A-A37E-061D52F87251","type":"ForEachBlock","disabled":false,"name":"loop7","displayName":"Loop 7","comment":"For each tag","childId":null,"inputs":[{"id":"input","value":"{ $.loop.item.'tag name' }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":1819,"loopBlockId":"C35E5565-CD84-4137-AEB9-E59E2B308A77"},{"id":"93631F87-8449-4124-AB06-9815E3984BCC","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest20","displayName":"Qlik Cloud Services - Raw API Request 20","comment":"Update item with tag","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections/{ $.rawAPIRequest21.data[0].id }/items","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"id","value":"{ $.rawAPIRequest22.data[0].id }"}],"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3010,"y":2039,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"C35E5565-CD84-4137-AEB9-E59E2B308A77","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest21","displayName":"Qlik Cloud Services - Raw API Request 21","comment":"Check tag id","childId":"93631F87-8449-4124-AB06-9815E3984BCC","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"name","value":"{ $.loop7.item }"},{"key":"type","value":"public"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3010,"y":1919,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"1B827BE6-A75F-418B-A978-83949AC06C32","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest22","displayName":"Qlik Cloud Services - Raw API Request 22","comment":"Get ItemId","childId":"F48A1720-D507-4C7A-A37E-061D52F87251","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"items","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"resourceType","value":"automation"},{"key":"resourceIds","value":"{ $.createAutomation.id }"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":1699,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"7E62E761-D5B6-48CE-9036-821FE286259F","type":"SleepBlock","disabled":false,"name":"sleep2","displayName":"Sleep 2","comment":"1 sec sleep so automation is created.","childId":"1B827BE6-A75F-418B-A978-83949AC06C32","inputs":[{"id":"time","value":"1","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2890,"y":1579},{"id":"1B910F0A-EADD-4B1B-9C94-CB6BDB6EC18E","type":"FilterListBlock","disabled":false,"name":"filterList4","displayName":"Filter List 4","comment":"Filter all relevant automations we should delete","childId":"BE9E769E-4951-4251-BAE3-B44BADFD8795","inputs":[{"id":"list","value":"{ $.listTags }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"name","input2":"{ $.filterList6.item.'file name' }","operator":"="},{"input1":"resourceType","input2":"automation","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":2890,"y":239,"loopBlockId":null},{"id":"BE9E769E-4951-4251-BAE3-B44BADFD8795","type":"IfElseBlock","disabled":false,"name":"condition19","displayName":"Condition 19","comment":"Check if we can delete automations","childId":"3C1081B4-09D9-46A4-8524-6624716D8082","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList4 }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":2890,"y":359,"childTrueId":"44A3C327-A6AC-4D92-8254-8150FE94A18C","childFalseId":null},{"id":"956529E6-6E19-4480-9A9D-7B8D09BBA397","type":"FormBlock","disabled":false,"name":"inputs7","displayName":"Inputs 7","comment":"Check for deletion","childId":"A60BC40A-D30B-407B-A053-5D3BE2DC0846","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3010,"y":559,"form":[{"id":"inputs7-input-0","type":"multi_select","label":"We have found the following automation(s); We want to install a newer version; Can we delete these?","order":0,"values":"{ $.transformList[*].nameid }","options":{"default_select_all":true},"helpText":null,"isRequired":true}],"persistData":"no"},{"id":"38824585-B899-4095-A43B-0E85C851A1CE","type":"EndpointBlock","disabled":false,"name":"deleteAutomation","displayName":"Qlik Cloud Services - Delete Automation","comment":"Delete automations","childId":null,"inputs":[{"id":"b7fbf350-d044-11ec-9425-a7be3453fa5b","value":"{substr: { $.loop11.item }, {add: {strpos: { $.loop11.item }, '|||'}, 3}, {textlength: { $.loop11.item }}}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3130,"y":779,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"b7e0e7e0-d044-11ec-bfd0-7fb049972b2d","endpoint_role":"delete"},{"id":"E0F732B0-FE7D-4DA3-BA03-DB513E8666DE","type":"FilterListBlock","disabled":false,"name":"filterList8","displayName":"Filter List 8","comment":"Filter all relevant apps we should delete","childId":"21BBD44D-78B8-423E-BA27-7E7EDA335EBD","inputs":[{"id":"list","value":"{ $.listTags }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"name","input2":"{ $.filterList7.item.'file name' }","operator":"="},{"input1":"resourceType","input2":"app","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":3635,"y":236,"loopBlockId":null},{"id":"21BBD44D-78B8-423E-BA27-7E7EDA335EBD","type":"IfElseBlock","disabled":false,"name":"condition20","displayName":"Condition 20","comment":"Check if we can delete apps","childId":"F42AEA46-E421-4C5F-AC0A-25548B81E61E","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList8 }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":3635,"y":356,"childTrueId":"809D8CE8-40A0-48F7-852F-F5A864FB26A7","childFalseId":null},{"id":"605A957D-B48C-4D11-BCB6-500D8A4196A5","type":"SleepBlock","disabled":false,"name":"sleep3","displayName":"Sleep 3","comment":"1 sec sleep so app is created.","childId":"94266002-BB74-43F4-9A9B-E91E6F4C59CA","inputs":[{"id":"time","value":"1","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":1576},{"id":"DF8CD0EE-5B84-4935-9812-C5FA4C83A8B1","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest23","displayName":"Qlik Cloud Services - Raw API Request 23","comment":"Get ItemId","childId":"59E4C48F-D0ED-4C40-8023-7BB25A6A0B2F","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"items","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"resourceType","value":"app"},{"key":"resourceIds","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":3456,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"59E4C48F-D0ED-4C40-8023-7BB25A6A0B2F","type":"ForEachBlock","disabled":false,"name":"loop9","displayName":"Loop 9","comment":"For each tag","childId":null,"inputs":[{"id":"input","value":"{ $.loop.item.'tag name' }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":3576,"loopBlockId":"ACFBB2FD-6B61-44BA-BEF2-BB3095910099"},{"id":"ACFBB2FD-6B61-44BA-BEF2-BB3095910099","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest24","displayName":"Qlik Cloud Services - Raw API Request 24","comment":"Check tag id","childId":"E3BAF497-08F1-4579-AF55-528803243CCF","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[{"key":"name","value":"{ $.loop9.item }"},{"key":"type","value":"public"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":3676,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"E3BAF497-08F1-4579-AF55-528803243CCF","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest25","displayName":"Qlik Cloud Services - Raw API Request 25","comment":"Update item with tag","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections/{ $.rawAPIRequest24.data[0].id }/items","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"d8056ca0-2072-11ec-b110-cbae7b0a483b","type":"select","displayValue":"POST","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"id","value":"{ $.rawAPIRequest23.data[0].id }"}],"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":3796,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"6701F77F-3972-46D4-90BB-52E718D5BE7E","type":"FormBlock","disabled":false,"name":"inputs8","displayName":"Inputs 8","comment":"Check for deletion","childId":"C99009C0-772B-430B-AAA0-36DE2DBF0F88","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":556,"form":[{"id":"inputs8-input-0","type":"multi_select","label":"We have found the following app(s); We want to install a newer version; Can we delete these?","order":0,"values":"{ $.transformList2[*].nameid }","options":{"default_select_all":true},"helpText":null,"isRequired":true}],"persistData":"no"},{"id":"C99009C0-772B-430B-AAA0-36DE2DBF0F88","type":"ForEachBlock","disabled":false,"name":"loop10","displayName":"Loop 10","comment":"Loop over all automations to delete","childId":null,"inputs":[{"id":"input","value":"{ $.inputs8.'We have found the following app(s); We want to install a newer version; Can we delete these?'.selected }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":676,"loopBlockId":"7F9053C8-7A6E-4B65-A664-04E166667DBF"},{"id":"7F9053C8-7A6E-4B65-A664-04E166667DBF","type":"EndpointBlock","disabled":false,"name":"deleteApp","displayName":"Qlik Cloud Services - Delete App","comment":"","childId":null,"inputs":[{"id":"fcd14a20-67b2-11eb-9f5e-9113990ec3b6","value":"{substr: { $.loop10.item }, {add: {strpos: { $.loop10.item }, '|||'}, 3}, {textlength: { $.loop10.item }}}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3875,"y":776,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"fcc108b0-67b2-11eb-806a-3957ec36f31b","endpoint_role":"delete"},{"id":"44A3C327-A6AC-4D92-8254-8150FE94A18C","type":"TransformListBlock","disabled":false,"name":"transformList","displayName":"Transform List","comment":"","childId":"956529E6-6E19-4480-9A9D-7B8D09BBA397","inputs":[{"id":"list","value":"{ $.filterList4 }","type":"string","structure":[]},{"id":"mapping","value":[{"key":"nameid","value":"{$.filterList4.item.name}|||{$.filterList4.item.resourceId}"},{"key":"name","value":"{ $.filterList4.item.name }"},{"key":"resourceId","value":"{ $.filterList4.item.resourceId }"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":3010,"y":439,"loopBlockId":null},{"id":"809D8CE8-40A0-48F7-852F-F5A864FB26A7","type":"TransformListBlock","disabled":false,"name":"transformList2","displayName":"Transform List 2","comment":"","childId":"6701F77F-3972-46D4-90BB-52E718D5BE7E","inputs":[{"id":"list","value":"{ $.filterList8 }","type":"string","structure":[]},{"id":"mapping","value":[{"key":"nameid","value":"{$.filterList8.item.name}|||{$.filterList8.item.resourceId}"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":3755,"y":436,"loopBlockId":null},{"id":"A60BC40A-D30B-407B-A053-5D3BE2DC0846","type":"ForEachBlock","disabled":false,"name":"loop11","displayName":"Loop 11","comment":"","childId":null,"inputs":[{"id":"input","value":"{ $.inputs7.'We have found the following automation(s); We want to install a newer version; Can we delete these?'.selected }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3010,"y":679,"loopBlockId":"38824585-B899-4095-A43B-0E85C851A1CE"},{"id":"AD21BAF2-0C1A-4010-9CDA-11454E6D4028","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"","childId":"A78238C3-B9F9-4E4A-AE90-AD93A6E21270","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3635,"y":1336,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"7BDEE34B-7CA5-45C0-9837-47C577BC21B3","name":"Set key/values of { variable }","value":[{"key":"{ $.importAppFromBase64EncodedFile3.attributes.name }","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }"}]}]},{"id":"C9DAD1A8-1853-4281-9568-5787A7D622E1","type":"IfElseBlock","disabled":false,"name":"condition17","displayName":"Condition 17","comment":"Save id in predefined key","childId":"7E62E761-D5B6-48CE-9036-821FE286259F","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList6.item.'save_id_in' }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":2890,"y":1339,"childTrueId":"B525570D-CE73-4415-8BAF-BB4F5C129141","childFalseId":null},{"id":"B525570D-CE73-4415-8BAF-BB4F5C129141","type":"VariableBlock","disabled":false,"name":"oSettings","displayName":"Variable - oSettings","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3010,"y":1419,"variableGuid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","operations":[{"id":"set_key_value","key":"2CC728B1-04E7-41C3-9046-F42181F1D07B","name":"Set key/values of { variable }","value":[{"key":"{ $.filterList6.item.'save_id_in' }","value":"{ $.createAutomation.id }"}]}]},{"id":"9A095983-1F4F-47DB-B2A9-1419E740F055","type":"ForEachBlock","disabled":false,"name":"loop8","displayName":"Loop 8","comment":"For each product","childId":"3DA2C270-044C-40F7-8EE5-5D4C9FBB66C0","inputs":[{"id":"input","value":"{ $.compareLists }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-746,"y":130,"loopBlockId":"BCE0980F-302B-4855-83C7-992760C69450"},{"id":"EBB6BEBF-7BFD-470F-B607-96ADDF6D4699","type":"LabelBlock","disabled":false,"name":"label2","displayName":"Label - ReportInput","comment":"","childId":"9A095983-1F4F-47DB-B2A9-1419E740F055","inputs":[{"id":"name","value":"ReportInput","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-746,"y":10},{"id":"BCE0980F-302B-4855-83C7-992760C69450","type":"ShowBlock","disabled":false,"name":"output5","displayName":"Output 5","comment":"Output the input line.","childId":"DB51F775-E255-4938-BB4C-2D809CC515CF","inputs":[{"id":"input","value":"### { $.loop8.item.product }\n{$.loop8.item.input}\n___","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","displayValue":"Add this output to the list of all outputs","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-626,"y":230},{"id":"824B3A09-630C-4318-8434-FFB8951C7641","type":"ForEachBlock","disabled":false,"name":"loop12","displayName":"Loop 12","comment":"For each product","childId":null,"inputs":[{"id":"input","value":"{ $.compareLists }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":4171,"y":44,"loopBlockId":"30256667-35B5-4CFD-9BD0-0C4A84B4436E"},{"id":"30256667-35B5-4CFD-9BD0-0C4A84B4436E","type":"ShowBlock","disabled":false,"name":"output6","displayName":"Output 6","comment":"Output the output line.","childId":null,"inputs":[{"id":"input","value":"### { $.loop12.item.product }\n{ $.loop12.item.output}\n___","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":4291,"y":144},{"id":"3DA2C270-044C-40F7-8EE5-5D4C9FBB66C0","type":"GotoBlock","disabled":false,"name":"goToLabel10","displayName":"Go To Label 10","comment":"","childId":null,"inputs":[{"id":"label","value":"0FF0A90A-81E4-44D2-85E2-8B168E1598D8","type":"select","displayValue":"UserSettings","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-746,"y":510},{"id":"DB51F775-E255-4938-BB4C-2D809CC515CF","type":"FormBlock","disabled":false,"name":"inputs","displayName":"Inputs","comment":"","childId":null,"inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-626,"y":350,"form":[{"id":"inputs-input-0","type":"button","label":"Continue","order":0,"values":"Continue","options":[],"helpText":null,"isRequired":true}],"persistData":"no"},{"id":"79AFA211-8D2D-43B2-A9EF-08C10379EE96","type":"SnippetBlock","disabled":false,"name":"GetLoadScript","displayName":"Qlik Cloud Services - Get Load Script","comment":"","childId":"5D6CC2D5-8224-42C9-9E6D-1BA973932A7D","inputs":[{"id":"299dd6e0-7535-11eb-a1b1-8108a69d86b2","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":1776,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"8d2f7da0-5028-11eb-8889-317a6c8ea7fc"},{"id":"94266002-BB74-43F4-9A9B-E91E6F4C59CA","type":"IfElseBlock","disabled":false,"name":"condition21","displayName":"Condition 21","comment":"Check to modify script","childId":"264D2DBE-35C7-4328-ABB3-F5446CF79E87","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList7.item.use_saved_id }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":3635,"y":1696,"childTrueId":"79AFA211-8D2D-43B2-A9EF-08C10379EE96","childFalseId":null},{"id":"505B87AC-891F-4946-BCCD-31735BD842F0","type":"CaseBlock","disabled":false,"name":"case","displayName":"Case","comment":"","childId":"1BA16575-51F4-494C-8D2E-FA36C1072FCA","inputs":[{"id":"expression","value":"{ $.loop13.item }","type":"string","structure":[]},{"id":"statements","value":["bitmetric_id_1","bitmetric_id_2"],"type":"list","mode":"keyValue","structure":[]}],"settings":[],"collapsed":[{"name":"default","isCollapsed":false}],"x":3875,"y":2116,"statementChildrenIds":["FEBC14BE-2355-4FC2-914D-A10FED9F5D44","B82BF3C8-DE9C-4C48-B34C-D294B02F95FE"],"defaultChildId":null},{"id":"264D2DBE-35C7-4328-ABB3-F5446CF79E87","type":"IfElseBlock","disabled":true,"name":"condition24","displayName":"Condition 24","comment":"Reload after installation?","childId":"DF8CD0EE-5B84-4935-9812-C5FA4C83A8B1","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.filterList7.item.reload_after_installation }","input2":null,"operator":"isTrue"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":3635,"y":2936,"childTrueId":"A7191E66-4E7E-477F-9DF1-C976D604700D","childFalseId":null},{"id":"58D384EA-0583-4A0B-9A15-3D390FD6E409","type":"SnippetBlock","disabled":true,"name":"DoReload","displayName":"Qlik Cloud Services - Do Reload","comment":"","childId":null,"inputs":[{"id":"29603390-e716-11ea-9e37-05e08ee32111","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }","type":"string","structure":[]},{"id":"2ac9eef0-a677-11eb-aacc-8b755d0fe484","value":"Start reload and continue","type":"select","displayValue":"Start reload and continue","structure":[]},{"id":"6892c0c0-c795-11eb-9860-9dc8cb705e25","value":null,"type":"select","structure":[]},{"id":"ecebf340-c797-11eb-8671-53658babb1a1","value":null,"type":"select","structure":[]},{"id":"069de770-8277-11f0-a252-ad6769632a1c","value":null,"type":"select","structure":[]},{"id":"06a02bd0-8277-11f0-b78b-f7910663702f","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"cc8dd1c0-a438-11f0-9e17-c77404b63446","value":null,"type":"select","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3875,"y":3216,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"b5dbb7a0-e715-11ea-b2bf-43bb35adee19"},{"id":"A7191E66-4E7E-477F-9DF1-C976D604700D","type":"FormBlock","disabled":true,"name":"inputs6","displayName":"Inputs 6","comment":"","childId":"959B1FCC-5B26-4E0B-A0DF-EA180F73C6F4","inputs":[],"settings":[{"id":"persist_data","value":"no","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":3016,"form":[{"id":"inputs6-input-0","type":"select","label":"Do you want to reload the app?","order":0,"values":"Yes, No","options":[],"helpText":"The current app we install is: { $.filterList7.item.'file name' }","isRequired":true}],"persistData":"no"},{"id":"959B1FCC-5B26-4E0B-A0DF-EA180F73C6F4","type":"IfElseBlock","disabled":true,"name":"condition25","displayName":"Condition 25","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.inputs6.'Do you want to reload the app?' }","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":3755,"y":3136,"childTrueId":"58D384EA-0583-4A0B-9A15-3D390FD6E409","childFalseId":null},{"id":"8D31E475-182F-408A-A579-06751DB427BB","type":"VariableBlock","disabled":false,"name":"listTags","displayName":"Variable - listTags","comment":"Clean oTag to get all automations","childId":"55417A50-7B36-4250-BB91-7AD2F3379AB3","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1998,"y":49,"variableGuid":"65345B51-C037-4439-A13A-C995098897AD","operations":[{"id":"empty","key":"D9AF84FE-C344-4FBD-B9E4-153E4BA119DA","name":"Empty { variable }","value":null}]},{"id":"DA029509-4B29-4CF0-B865-750A11B8814D","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest14","displayName":"Qlik Cloud Services - Raw API Request 14","comment":"Get all items with this tag.","childId":"3082EC19-9651-42DD-A38B-95D474C01B0A","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"collections/{$.rawAPIRequest18.data[0].id}/items?limit=100","type":"string","structure":[]},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba1eed0-2072-11ec-aa67-f118ee53373a","type":"select","displayValue":"GET","structure":[]},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":null,"type":"object","mode":"keyValue","structure":[]},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":[],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2358,"y":569,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"create"},{"id":"3082EC19-9651-42DD-A38B-95D474C01B0A","type":"VariableBlock","disabled":false,"name":"listTags","displayName":"Variable - listTags","comment":"Set all objects in oTagAutomation","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":2358,"y":689,"variableGuid":"65345B51-C037-4439-A13A-C995098897AD","operations":[{"id":"merge","key":"2B3B975F-0888-4580-9C88-73C58DC43193","name":"Merge other list into { variable }","value":"{ $.rawAPIRequest14.data }"}]},{"id":"E96A65C0-FA3A-4B16-8141-4C387972AC6D","type":"SnippetBlock","disabled":false,"name":"saveApp","displayName":"Qlik Cloud Services - Save App","comment":"","childId":null,"inputs":[{"id":"e4c96750-018f-11ec-9324-452b72262f88","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3875,"y":2736,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"e4c44ca0-018f-11ec-9e3c-1d9f5d508976"},{"id":"5D6CC2D5-8224-42C9-9E6D-1BA973932A7D","type":"VariableBlock","disabled":false,"name":"sLoadScript","displayName":"Variable - sLoadScript","comment":"","childId":"2ECFFA72-7CAA-4361-94C0-7AA839387E7A","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":1896,"variableGuid":"FC1F1FCE-7634-4292-9110-32B8E6F8B2E1","operations":[{"id":"set_value","key":"F3877D99-0212-468A-8FEF-5CEF3679C771","name":"Set value of { variable }","value":"{ $.GetLoadScript }"}]},{"id":"FEBC14BE-2355-4FC2-914D-A10FED9F5D44","type":"VariableBlock","disabled":false,"name":"sLoadScript","displayName":"Variable - sLoadScript","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3995,"y":2196,"variableGuid":"FC1F1FCE-7634-4292-9110-32B8E6F8B2E1","operations":[{"id":"set_value","key":"F3877D99-0212-468A-8FEF-5CEF3679C771","name":"Set value of { variable }","value":"{ replace: { $.sLoadScript}, 'bitmetric_id_1', $.oSettings.bitmetric_id_1 }"}]},{"id":"B82BF3C8-DE9C-4C48-B34C-D294B02F95FE","type":"VariableBlock","disabled":false,"name":"sLoadScript","displayName":"Variable - sLoadScript","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3995,"y":2356,"variableGuid":"FC1F1FCE-7634-4292-9110-32B8E6F8B2E1","operations":[{"id":"set_value","key":"F3877D99-0212-468A-8FEF-5CEF3679C771","name":"Set value of { variable }","value":"{ replace: { $.sLoadScript}, 'bitmetric_id_2', $.oSettings.bitmetric_id_2 }"}]},{"id":"1BA16575-51F4-494C-8D2E-FA36C1072FCA","type":"EndpointBlock","disabled":false,"name":"setLoadScript","displayName":"Qlik Cloud Services - Set Load Script","comment":"","childId":"E96A65C0-FA3A-4B16-8141-4C387972AC6D","inputs":[{"id":"917b8660-a12b-11ed-873f-fd156b9f0ebb","value":"{ $.importAppFromBase64EncodedFile3.attributes.id }","type":"string","structure":[]},{"id":"d31e0400-a12c-11ed-b43b-29c58fb1f869","value":"{ $.sLoadScript}","type":"string","structure":[]},{"id":"0da08560-a12d-11ed-92bf-6146d9e01e80","value":null,"type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3875,"y":2616,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"916661a0-a12b-11ed-882f-fb01a4e99b0a","endpoint_role":"create"},{"id":"2ECFFA72-7CAA-4361-94C0-7AA839387E7A","type":"ForEachBlock","disabled":false,"name":"loop13","displayName":"Loop 13","comment":"","childId":null,"inputs":[{"id":"input","value":"{ $.filterList7.item.use_saved_id }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":3755,"y":2016,"loopBlockId":"505B87AC-891F-4946-BCCD-31735BD842F0"},{"id":"FD7D0EBA-E8BC-4D1E-89C0-6AC0F3C47707","type":"EndpointBlock","disabled":false,"name":"listMembersFromSpace2","displayName":"Qlik Cloud Services - List Members From Space 2","comment":"Get all groups","childId":"4FE231BD-8C7F-4682-A477-8DD7C29FA553","inputs":[{"id":"358ee8a0-6d34-11eb-b1f3-91a0d7274b22","value":"{ $.oSettings.sharedSpaceId }","type":"string","structure":[]},{"id":"86f34440-dd7e-11ef-91d1-63f16d094078","value":null,"type":"string","structure":[]},{"id":"972a9800-dd7e-11ef-95ae-93a368f4ba58","value":"a2e7fe30-dd7e-11ef-a774-1db611a33f43","type":"select","displayValue":"group","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":1084,"y":670,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"ffe6d930-6d33-11eb-ad8a-334e25c5e295","endpoint_role":"list"},{"id":"4FE231BD-8C7F-4682-A477-8DD7C29FA553","type":"CompareListsBlock","disabled":false,"name":"compareLists2","displayName":"Compare Lists 2","comment":"Compare user groups vs. Groups","childId":"C8094EDF-0EC1-477F-8280-F9BC9A3AB040","inputs":[{"id":"list1","value":"{ $.listMembersFromSpace2 }","type":"string","structure":[]},{"id":"list2","value":"{ $.getUser.assignedGroups }","type":"string","structure":[]}],"settings":[{"id":"list1_unique_key","value":"assigneeId","type":"field","structure":[]},{"id":"list2_unique_key","value":"id","type":"field","structure":[]},{"id":"compare_mode","value":"intersect","type":"select","displayValue":"Intersect (all items that exist in both list1 and list2)","structure":[]},{"id":"case_insensitive","value":null,"type":"checkbox","structure":[]},{"id":"result_mode","value":"list1","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":1084,"y":790,"loopBlockId":null},{"id":"C8094EDF-0EC1-477F-8280-F9BC9A3AB040","type":"LookupItemBlock","disabled":false,"name":"lookupItemInList4","displayName":"Lookup Item In List 4","comment":"Check if needed role exists for group assignment","childId":"6323E0D4-D064-4F24-84DE-17C602A00C42","inputs":[{"id":"list","value":"{ $.compareLists2 }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"roles","input2":"producer","operator":"inList"},{"input1":"roles","input2":"facilitator","operator":"inList"},{"input1":"roles","input2":"codeveloper","operator":"inList"}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[],"x":1084,"y":910},{"id":"6B3CDF5C-2114-45A1-99F2-C1D11D0D765E","type":"EndpointBlock","disabled":false,"name":"addMemberToSpace","displayName":"Qlik Cloud Services - Add Member To Space","comment":"Add user to space","childId":"6699C244-DD58-4697-8537-6BDB79864D00","inputs":[{"id":"3162f740-6d33-11eb-a089-71f7ccab24b9","value":"{ $.oSettings.sharedSpaceId }","type":"string","structure":[]},{"id":"27499b00-6d31-11eb-bbe5-5b3db3c974dc","value":"{ $.getUser.id }","type":"string","structure":[]},{"id":"2751b870-6d31-11eb-9d77-41c5fae28bc5","value":"[\"producer\", \"consumer\", \"dataconsumer\", \"facilitator\", \"codeveloper\"]","type":"string","structure":[]},{"id":"275e2c50-6d31-11eb-8eeb-157347755492","value":"user","type":"select","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1324,"y":1190,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"272d9c70-6d31-11eb-870f-67624392ed86","endpoint_role":"create"},{"id":"7CCD456C-4573-4360-ABC8-B74C5B92BF62","type":"IfElseBlock","disabled":false,"name":"condition26","displayName":"Condition 26","comment":"See if user exists in group","childId":"DD2F270B-48BB-48C1-B269-74AE3BA65CC3","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.lookupItemInList4 }","operator":"empty","input2":null}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1204,"y":1110,"childTrueId":"6B3CDF5C-2114-45A1-99F2-C1D11D0D765E","childFalseId":null},{"id":"DD2F270B-48BB-48C1-B269-74AE3BA65CC3","type":"IfElseBlock","disabled":false,"name":"condition27","displayName":"Condition 27","comment":"See if user exists in group","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.lookupItemInList3 }","input2":null,"operator":"notEmpty"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":1204,"y":1470,"childTrueId":"831B4214-8B19-4A5C-AF8A-43C0E2CAD178","childFalseId":null},{"id":"6699C244-DD58-4697-8537-6BDB79864D00","type":"ShowBlock","disabled":false,"name":"output7","displayName":"Output 7","comment":"","childId":null,"inputs":[{"id":"input","value":"We've updated your roles in the space: { $.lookupItemInList.name }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1324,"y":1310}],"variables":[{"guid":"DAF637D7-1BC5-454B-91D0-C923686FC7A0","name":"professionalEntitlementsAvailable","type":"number"},{"guid":"42AF1288-2A30-43BD-9F49-EABC5B201234","name":"sJSON","type":"string"},{"guid":"863C85BA-EA65-481C-8810-827FB5CA52AD","name":"userRoleList","type":"list"},{"guid":"D7788911-1C29-4B01-9CBF-B371257F45F8","name":"userIsDeveloper","type":"number"},{"guid":"388E1309-C1A8-46A6-B408-C39610475933","name":"apiKeyExpiry","type":"string"},{"guid":"F63EFB81-990E-419C-9B60-8959B2F5912E","name":"autogenerateAPIKey","type":"number"},{"guid":"26F77C5A-6960-4D98-9D89-B795B166D996","name":"apiKeyName","type":"string"},{"guid":"A05AB10D-4128-40CE-B63B-E44ABB90E9B6","name":"appBase64","type":"string"},{"guid":"38F9A9DB-B3C5-4909-9223-189D0A8F5DF5","name":"sProductToInstall","type":"string"},{"guid":"3EB6C12E-113F-41F9-A9FC-96801B548C35","name":"oSettings","type":"object"},{"guid":"03202324-E945-4340-91E6-D566B865D4F0","name":"oTag","type":"object"},{"guid":"210E4E4B-F17D-4E64-BD29-008041EB3388","name":"lInstalledApps","type":"list"},{"guid":"B08939BA-1971-4DBC-B4E5-6188E7F7F78D","name":"oInstalledApps","type":"object"},{"guid":"09CCD776-D6A1-45BB-B8F7-D1F56264D229","name":"oTagAutomation","type":"object"},{"guid":"FC1F1FCE-7634-4292-9110-32B8E6F8B2E1","name":"sLoadScript","type":"string"},{"guid":"F5E8ED9A-6EB3-47A0-B631-594100B42BEB","name":"tTaggedApps","type":"table"},{"guid":"65345B51-C037-4439-A13A-C995098897AD","name":"listTags","type":"list"}]}